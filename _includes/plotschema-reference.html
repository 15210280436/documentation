{% capture plotschemacontent %}
<div class="row">
    <div class="four columns">
        <div class="toc">
            {% for trace in site.data.plotschema.traces %}
                <a href="#{{trace[0]}}"><h4>{{trace[0]}}</h4></a>
                {% assign attribute=trace[1].attributes %}
                {% assign localparentlink=trace[0] %}
                {% assign display_info = false %}
                {% assign toc = true %}
                {% include reference-block.html parentlink=localparentlink %}
                <hr>
            {% endfor %}

            <a href="#layout"><h4>layout</h4></a>
            {% assign localparentlink="layout" %}
            {% assign attribute=site.data.plotschema.layout.layoutAttributes %}
            {% include reference-block.html parentlink=localparentlink %}
        </div>
    </div>

    <div class="eight columns">
    {% for trace in site.data.plotschema.traces %}
        <a id="{{ trace[0] }}" href="#{{ trace[0] }}"><h4>{{ trace[0] }}</h4></a>
        <div class="description">
            <!-- Ugh, wish I could keep `language` out of here -->
            {% if page.language == "plotly_js" %}
                A <code>{{trace[0]}}</code> trace is an object with the key <code>"type"</code> equal to <code>"{{trace[1].attributes.type}}"</code> (i.e. <code>{"type": "{{trace[1].attributes.type}}"}</code>) and any of the keys listed below.
            {% elsif page.language == "python" %}
                <code>import plotly.graph_objs as go</code><br><code>go.{{ trace[1].attributes.type | capitalize }}</code><br>
                A <code>{{ trace[1].attributes.type | capitalize }}</code> trace is a graph object with any of the keys listed below.
            {% elsif page.language == "r" %}
                A <code>{{trace[0]}}</code> trace is initialized with <code>plot_ly</code> or <code>add_trace</code>:<br>
                <code>plot_ly(df, type="{{trace[0]}}"[, ...])<br>
                      add_trace(p, type="{{trace[0]}}"[, ...])</code><br>
                A {{trace[0]}} trace accepts any of the keys listed below.
            {% elsif page.language == "matlab" %}
                A <code>{{trace[0]}}</code> trace is a <code>struct</code> inside <code>fig.data</code> which has <code>type</code> equal to <code>'{{trace[0]}}'</code>. This section lists all of the valid keys that a <code>{{trace[0]}} struct</code> can contain.
            {% endif %}
            <br><br>{{ trace[1].description }}<br><br>
        </div>

        {% assign localparentlink=trace[0] %}
        {% assign attribute=trace[1].attributes %}
        {% assign display_info = true %}
        {% assign toc = false %}
        {% include reference-block.html parentlink=localparentlink%}
        <hr>
    {% endfor %}

    <a id="layout" href="#layout"><h4>layout</h4></a>
    {% assign localparentlink="layout" %}
    {% assign attribute=site.data.plotschema.layout.layoutAttributes %}
    {% include reference-block.html parentlink=localparentlink %}

    </div>
</div>
{% endcapture %}
{% capture curlyarray %}{% raw %}{array}{% endraw %}{% endcapture %}
{% capture curlyarrays %}{% raw %}{arrays}{% endraw %}{% endcapture %}
{% capture curly2darray %}{% raw %}{2D array}{% endraw %}{% endcapture %}
{% capture curlyobject %}{% raw %}{object}{% endraw %}{% endcapture %}
{{ plotschemacontent | replace:'*',quote | replace:curlyarray,array | replace:curlyobject,object | replace:curlyarrays,arrays | replace:curly2darray,2darray | replace:"data_array",data_array }}
