---
name: Labelling Lines with Annotations
plot_url: https://plot.ly/~neda/3469
language: php
suite: line-plots
order: 21
sitemap: false
---

// Learn about API authentication here: https://plot.ly/php/getting-started
// Find your api_key here: https://plot.ly/settings/api
$trace1 = array(
  'x' => array(2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2013), 
  'y' => array(74, 82, 80, 74, 73, 72, 74, 70, 70, 66, 66, 69), 
  'mode' => 'lines', 
  'name' => 'trace0_y', 
  'line' => array(
    'color' => 'rgba(67,67,67,1)', 
    'width' => 2
  ), 
  'connectgaps' => True, 
  'type' => 'scatter'
);
$trace2 = array(
  'x' => array(2001, 2013), 
  'y' => array(74, 69), 
  'mode' => 'markers', 
  'name' => 'trace1_y', 
  'marker' => array(
    'color' => 'rgba(67,67,67,1)', 
    'size' => 8
  ), 
  'type' => 'scatter'
);
$trace3 = array(
  'x' => array(2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2013), 
  'y' => array(45, 42, 50, 46, 36, 36, 34, 35, 32, 31, 31, 28), 
  'mode' => 'lines', 
  'name' => 'trace2_y', 
  'line' => array(
    'color' => 'rgba(115,115,115,1)', 
    'width' => 2
  ), 
  'connectgaps' => True, 
  'type' => 'scatter'
);
$trace4 = array(
  'x' => array(2001, 2013), 
  'y' => array(45, 28), 
  'mode' => 'markers', 
  'name' => 'trace3_y', 
  'marker' => array(
    'color' => 'rgba(115,115,115,1)', 
    'size' => 8
  ), 
  'type' => 'scatter'
);
$trace5 = array(
  'x' => array(2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2013), 
  'y' => array(13, 14, 20, 24, 20, 24, 24, 40, 35, 41, 43, 50), 
  'mode' => 'lines', 
  'name' => 'trace4_y', 
  'line' => array(
    'color' => 'rgba(49,130,189, 1)', 
    'width' => 4
  ), 
  'connectgaps' => True, 
  'type' => 'scatter'
);
$trace6 = array(
  'x' => array(2001, 2013), 
  'y' => array(13, 50), 
  'mode' => 'markers', 
  'name' => 'trace5_y', 
  'marker' => array(
    'color' => 'rgba(49,130,189, 1)', 
    'size' => 12
  ), 
  'type' => 'scatter'
);
$trace7 = array(
  'x' => array(2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2013), 
  'y' => array(18, 21, 18, 21, 16, 14, 13, 18, 17, 16, 19, 23), 
  'mode' => 'lines', 
  'name' => 'trace6_y', 
  'line' => array(
    'color' => 'rgba(189,189,189,1)', 
    'width' => 2
  ), 
  'connectgaps' => True, 
  'type' => 'scatter'
);
$trace8 = array(
  'x' => array(2001, 2013), 
  'y' => array(18, 23), 
  'mode' => 'markers', 
  'name' => 'trace7_y', 
  'marker' => array(
    'color' => 'rgba(189,189,189,1)', 
    'size' => 8
  ), 
  'type' => 'scatter'
);
$data = array(trace1, trace2, trace3, trace4, trace5, trace6, trace7, trace8);
$layout = array(
  'showlegend' => False, 
  'autosize' => False, 
  'width' => 600, 
  'height' => 600, 
  'xaxis' => array(
    'showgrid' => False, 
    'showline' => True, 
    'autotick' => False, 
    'ticks' => 'outside', 
    'showticklabels' => True, 
    'ticklen' => 5, 
    'tickwidth' => 2, 
    'tickcolor' => 'rgb(204, 204, 204)', 
    'tickfont' => array(
      'family' => 'Arial', 
      'size' => 12, 
      'color' => 'rgb(82, 82, 82)'
    ), 
    'linecolor' => 'rgb(204, 204, 204)', 
    'linewidth' => 2
  ), 
  'yaxis' => array(
    'showgrid' => False, 
    'zeroline' => False, 
    'showline' => False, 
    'showticklabels' => False
  ), 
  'annotations' => array(
    array(
      'x' => 0.05, 
      'y' => 74, 
      'xref' => 'paper', 
      'text' => 'Television 74%', 
      'showarrow' => False, 
      'font' => array(
        'family' => 'Arial', 
        'size' => 16, 
        'color' => array('rgba(67,67,67,1)', 'rgba(115,115,115,1)', 'rgba(49,130,189, 1)', 'rgba(189,189,189,1)')
      ), 
      'xanchor' => 'right', 
      'yanchor' => 'middle'
    ), 
    array(
      'x' => 0.95, 
      'y' => 69, 
      'xref' => 'paper', 
      'text' => '69%', 
      'showarrow' => False, 
      'font' => array(
        'family' => 'Arial', 
        'size' => 16, 
        'color' => array('rgba(67,67,67,1)', 'rgba(115,115,115,1)', 'rgba(49,130,189, 1)', 'rgba(189,189,189,1)')
      ), 
      'xanchor' => 'left', 
      'yanchor' => 'middle'
    ), 
    array(
      'x' => 0.05, 
      'y' => 45, 
      'xref' => 'paper', 
      'text' => 'Newspaper 45%', 
      'showarrow' => False, 
      'font' => array(
        'family' => 'Arial', 
        'size' => 16, 
        'color' => array('rgba(67,67,67,1)', 'rgba(115,115,115,1)', 'rgba(49,130,189, 1)', 'rgba(189,189,189,1)')
      ), 
      'xanchor' => 'right', 
      'yanchor' => 'middle'
    ), 
    array(
      'x' => 0.95, 
      'y' => 28, 
      'xref' => 'paper', 
      'text' => '28%', 
      'showarrow' => False, 
      'font' => array(
        'family' => 'Arial', 
        'size' => 16, 
        'color' => array('rgba(67,67,67,1)', 'rgba(115,115,115,1)', 'rgba(49,130,189, 1)', 'rgba(189,189,189,1)')
      ), 
      'xanchor' => 'left', 
      'yanchor' => 'middle'
    ), 
    array(
      'x' => 0.05, 
      'y' => 13, 
      'xref' => 'paper', 
      'text' => 'Internet 13%', 
      'showarrow' => False, 
      'font' => array(
        'family' => 'Arial', 
        'size' => 16, 
        'color' => array('rgba(67,67,67,1)', 'rgba(115,115,115,1)', 'rgba(49,130,189, 1)', 'rgba(189,189,189,1)')
      ), 
      'xanchor' => 'right', 
      'yanchor' => 'middle'
    ), 
    array(
      'x' => 0.95, 
      'y' => 50, 
      'xref' => 'paper', 
      'text' => '50%', 
      'showarrow' => False, 
      'font' => array(
        'family' => 'Arial', 
        'size' => 16, 
        'color' => array('rgba(67,67,67,1)', 'rgba(115,115,115,1)', 'rgba(49,130,189, 1)', 'rgba(189,189,189,1)')
      ), 
      'xanchor' => 'left', 
      'yanchor' => 'middle'
    ), 
    array(
      'x' => 0.05, 
      'y' => 18, 
      'xref' => 'paper', 
      'text' => 'Radio 18%', 
      'showarrow' => False, 
      'font' => array(
        'family' => 'Arial', 
        'size' => 16, 
        'color' => array('rgba(67,67,67,1)', 'rgba(115,115,115,1)', 'rgba(49,130,189, 1)', 'rgba(189,189,189,1)')
      ), 
      'xanchor' => 'right', 
      'yanchor' => 'middle'
    ), 
    array(
      'x' => 0.95, 
      'y' => 23, 
      'xref' => 'paper', 
      'text' => '23%', 
      'showarrow' => False, 
      'font' => array(
        'family' => 'Arial', 
        'size' => 16, 
        'color' => array('rgba(67,67,67,1)', 'rgba(115,115,115,1)', 'rgba(49,130,189, 1)', 'rgba(189,189,189,1)')
      ), 
      'xanchor' => 'left', 
      'yanchor' => 'middle'
    ), 
    array(
      'x' => 0.0, 
      'y' => 1.05, 
      'xref' => 'paper', 
      'yref' => 'paper', 
      'text' => 'Main Source for News', 
      'showarrow' => False, 
      'font' => array(
        'family' => 'Arial', 
        'size' => 30, 
        'color' => 'rgb(37,37,37)'
      ), 
      'xanchor' => 'left', 
      'yanchor' => 'bottom'
    ), 
    array(
      'x' => 0.5, 
      'y' => -0.1, 
      'xref' => 'paper', 
      'yref' => 'paper', 
      'text' => 'Source: PewResearch Center & Storytelling with data', 
      'showarrow' => False, 
      'font' => array(
        'family' => 'Arial', 
        'size' => 12, 
        'color' => 'rgb(150,150,150)'
      ), 
      'xanchor' => 'center', 
      'yanchor' => 'top'
    )
  ), 
  'margin' => array(
    'l' => 100, 
    'r' => 20, 
    't' => 110, 
    'autoexpand' => False
  )
);

$args = array(
          'filename' =>  '2015-05-20-gallery-news',
          'fileopt' =>  'overwrite',
          'layout' => $layout,
          'world_readable' => true
);
$res = $pl_obj->post( 'plot', $data, $args );
var_dump( $res );
