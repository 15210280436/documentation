---
name: Waterfall Bar Chart
plot_url: https://plot.ly/~neda/2991/annual-profit-2015/
language: php
suite: bar
order: 16
sitemap: false
---

// Learn about API authentication here: https://plot.ly/php/getting-started
// Find your api_key here: https://plot.ly/settings/api
$trace1 = array(
  'x' => array('Product</br>Revenue', 'Services</br>Revenue', 'Total</br>Revenue', 'Fixed</br>Costs', 'Variable</br>Costs', 'Total</br>Costs', 'Total'), 
  'y' => array(0, 430, 0, 570, 370, 370, 0), 
  'name' => 'trace0', 
  'marker' => array('color' => 'rgba(1,1,1, 0.0)'), 
  'type' => 'bar'
);
$trace2 = array(
  'x' => array('Product</br>Revenue', 'Services</br>Revenue', 'Total</br>Revenue', 'Fixed</br>Costs', 'Variable</br>Costs', 'Total</br>Costs', 'Total'), 
  'y' => array(430, 260, 690, 0, 0, 0, 0), 
  'name' => 'trace1', 
  'marker' => array(
    'color' => 'rgba(55, 128, 191, 0.7)', 
    'line' => array(
      'color' => 'rgba(55, 128, 191, 1.0)', 
      'width' => 2
    )
  ), 
  'type' => 'bar'
);
$trace3 = array(
  'x' => array('Product</br>Revenue', 'Services</br>Revenue', 'Total</br>Revenue', 'Fixed</br>Costs', 'Variable</br>Costs', 'Total</br>Costs', 'Total'), 
  'y' => array(0, 0, 0, 120, 200, 320, 0), 
  'name' => 'trace2', 
  'marker' => array(
    'color' => 'rgba(219, 64, 82, 0.7)', 
    'line' => array(
      'color' => 'rgba(219, 64, 82, 1.0)', 
      'width' => 2
    )
  ), 
  'type' => 'bar'
);
$trace4 = array(
  'x' => array('Product</br>Revenue', 'Services</br>Revenue', 'Total</br>Revenue', 'Fixed</br>Costs', 'Variable</br>Costs', 'Total</br>Costs', 'Total'), 
  'y' => array(0, 0, 0, 0, 0, 0, 370), 
  'name' => 'trace3', 
  'marker' => array(
    'color' => 'rgba(50, 171, 96, 0.7)', 
    'line' => array(
      'color' => 'rgba(50, 171, 96, 1.0)', 
      'width' => 2
    )
  ), 
  'type' => 'bar'
);
$data = array(trace1, trace2, trace3, trace4);
$layout = array(
  'title' => 'Annual Profit- 2015', 
  'showlegend' => False, 
  'width' => 600, 
  'height' => 600, 
  'annotations' => array(
    array(
      'x' => 'Product</br>Revenue', 
      'y' => 400, 
      'text' => '$430K', 
      'showarrow' => False, 
      'font' => array(
        'family' => 'Arial', 
        'size' => 14, 
        'color' => 'rgba(245, 246, 249, 1)'
      )
    ), 
    array(
      'x' => 'Services</br>Revenue', 
      'y' => 660, 
      'text' => '$260K', 
      'showarrow' => False, 
      'font' => array(
        'family' => 'Arial', 
        'size' => 14, 
        'color' => 'rgba(245, 246, 249, 1)'
      )
    ), 
    array(
      'x' => 'Total</br>Revenue', 
      'y' => 660, 
      'text' => '$690K', 
      'showarrow' => False, 
      'font' => array(
        'family' => 'Arial', 
        'size' => 14, 
        'color' => 'rgba(245, 246, 249, 1)'
      )
    ), 
    array(
      'x' => 'Fixed</br>Costs', 
      'y' => 590, 
      'text' => '$-120K', 
      'showarrow' => False, 
      'font' => array(
        'family' => 'Arial', 
        'size' => 14, 
        'color' => 'rgba(245, 246, 249, 1)'
      )
    ), 
    array(
      'x' => 'Variable</br>Costs', 
      'y' => 400, 
      'text' => '$-200K', 
      'showarrow' => False, 
      'font' => array(
        'family' => 'Arial', 
        'size' => 14, 
        'color' => 'rgba(245, 246, 249, 1)'
      )
    ), 
    array(
      'x' => 'Total</br>Costs', 
      'y' => 400, 
      'text' => '$-320K', 
      'showarrow' => False, 
      'font' => array(
        'family' => 'Arial', 
        'size' => 14, 
        'color' => 'rgba(245, 246, 249, 1)'
      )
    ), 
    array(
      'x' => 'Total', 
      'y' => 340, 
      'text' => '$370K', 
      'showarrow' => False, 
      'font' => array(
        'family' => 'Arial', 
        'size' => 14, 
        'color' => 'rgba(245, 246, 249, 1)'
      )
    )
  ), 
  'paper_bgcolor' => 'rgba(245, 246, 249, 1)', 
  'plot_bgcolor' => 'rgba(245, 246, 249, 1)', 
  'barmode' => 'stack'
);

$args = array(
          'filename' =>  '2015-06-17-waterfall-bar',
          'fileopt' =>  'overwrite',
          'layout' => $layout,
          'world_readable' => true
);
$res = $pl_obj->post( 'plot', $data, $args );
var_dump( $res );
