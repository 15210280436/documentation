---
name: Heatmap with Unequal Block Sizes
plot_url: https://plot.ly/~jackp/10370
language: python
suite: heatmap
order: 4
sitemap: false
arrangement: horizontal
height: 700
width: 700
---
# Learn about API authentication here: https://plot.ly/python/getting-started
# Find your api_key here: https://plot.ly/settings/api

from numpy import *
import plotly.plotly as py

# Golden spiral with fibonacci rectangles

## Build the spiral
def spiral(th):
    a = 1.120529
    b = 0.306349 
    r = a*exp(-b*th)
    return (r*cos(th), r*sin(th))

nspiral = 2 # number of spiral loops

th = linspace(-pi/13,2*pi*nspiral,1000); # angle
(x,y) = spiral(th)

# shift the spiral north so that it is centered
yshift = (1.6 - (max(y)-min(y)))/2  

s = dict(x= -x+x[0], y= y-y[0]+yshift, 
     line =dict(color='white',width=3))  # spiral

# Build the rectangles as a heatmap
# specify the edges of the heatmap squares
phi = ( 1+sqrt(5) )/2.
xe = [0, 1, 1+(1/(phi**4)), 1+(1/(phi**3)), phi]    
ye = [0, 1/(phi**3),1/phi**3+1/phi**4,1/(phi**2),1]

z = [ [13,3,3,5],
      [13,2,1,5],
      [13,10,11,12],
      [13,8,8,8]
    ]

hm = dict(x = sort(xe), 
          y = sort(ye)+yshift, 
          z = z, 
          type = 'heatmap', 
          colorscale = 'Viridis')

axis_template = dict(range = [0,1.6], autorange = False, 
             showgrid = False, zeroline = False, 
             linecolor = 'black', showticklabels = False, 
             ticks = '' )

layout = dict( margin = dict(t=200,r=200,b=200,l=200),
    xaxis = axis_template,
    yaxis = axis_template,
    showlegend = False,
    width = 700, height = 700, 
    autosize = False )

figure = dict(data=[s, hm],layout=layout)

url = py.plot(figure, filename='golden spiral', height=750)