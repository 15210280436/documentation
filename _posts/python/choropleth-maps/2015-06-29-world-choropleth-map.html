---
name: World Choropleth Map
plot_url: https://plot.ly/~jackp/8527/
language: python
suite: choropleth-maps
order: 2
---
# Learn about API authentication here: https://plot.ly/python/getting-started
# Find your api_key here: https://plot.ly/settings/api

import plotly.plotly as py
import pandas as pd
import colorlover as cl

df = pd.read_csv('https://raw.githubusercontent.com/plotly/datasets/master/2014_world_gdp_with_codes.csv')

scl = cl.interp( cl.scales['9']['seq']['RdPu'], 1000 )[400:1000]
scl = [ [float(i)/float(len(scl)), scl[i-1]] for i in range(len(scl)+1) ]

data = [ dict(
        type = 'choropleth',
        locations = df['CODE'],
        z = df['GDP (BILLIONS)'],
        text = df['COUNTRY'],
        colorscale = scl,
        autocolorscale = False,
        marker = dict(
            line = dict (
                color = 'rgb(255,255,255,0)',
                width = 0
            )
        ),
        tick0 = 0,
        zmin = 0,
        dtick = 1000,
        colorbar = dict(
            autotick = False,
            tickprefix = '$',
            title = 'GDP<br>Billions US$'
        ),
    ) ]

layout = dict(
    title = '2014 Global GDP<br>Source: \
<a href="https://www.cia.gov/library/publications/the-world-factbook/fields/2195.html">\
CIA World Factbook</a>',
    geo = dict(
        showframe = False,
        showcoastlines = False,
        projection = dict(
            type = 'Mercator'
        )
    )
)

fig = dict( data=data, layout=layout )
url = py.plot( fig, validate=False, filename='d3-world-map' )
