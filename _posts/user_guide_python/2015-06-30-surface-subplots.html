---
permalink: python/3d-surface-color-mapping/
description: Surface Subplot Demo
title: Surface Subplot Demo
has_thumbnail: true
thumbnail:
has_thumbnail: false
layout: user-guide
page_type: u-guide
language: python
title: Surface Subplot Demo
---
{% raw %}
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[100]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">plotly.plotly</span> <span class="kn">as</span> <span class="nn">py</span>
<span class="kn">import</span> <span class="nn">plotly.graph_objs</span> <span class="kn">as</span> <span class="nn">go</span>
<span class="kn">import</span> <span class="nn">math</span>
<span class="kn">from</span> <span class="nn">plotly</span> <span class="kn">import</span> <span class="n">tools</span>
<span class="kn">import</span> <span class="nn">copy</span>


<span class="c">#data related to the ring cyclide is loaded</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;2381.json&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">data_file</span><span class="p">:</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">data_file</span><span class="p">)</span>


<span class="n">data_original</span> <span class="o">=</span> <span class="n">fig</span><span class="p">[</span><span class="s">&#39;data&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>     <span class="c">#this will be trace0</span>

<span class="n">data</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">fig</span><span class="p">[</span><span class="s">&#39;data&#39;</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>        <span class="c">#trace1</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[101]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span class="n">lx</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s">&#39;z&#39;</span><span class="p">])</span>
<span class="n">ly</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s">&#39;z&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>

<span class="n">out</span> <span class="o">=</span> <span class="p">[]</span>


<span class="k">def</span> <span class="nf">dist_origin</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">):</span>

    <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">((</span><span class="mf">1.0</span> <span class="o">*</span> <span class="n">x</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">*</span> <span class="n">y</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">*</span> <span class="n">z</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="n">lx</span><span class="p">):</span>
    <span class="n">temp</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="n">ly</span><span class="p">):</span>
        <span class="n">temp</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="n">dist_origin</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s">&#39;x&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;y&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;z&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]))</span>
    <span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">temp</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">out</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">out</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>

<span class="n">data</span><span class="p">[</span><span class="s">&#39;surfacecolor&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">out</span>     <span class="c">#sets surface-color to distance from the origin</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>300
300
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[102]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
<span class="k">print</span><span class="p">(</span><span class="n">data_original</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>[u&apos;name&apos;, u&apos;colorscale&apos;, &apos;surfacecolor&apos;, u&apos;y&apos;, u&apos;x&apos;, u&apos;z&apos;, u&apos;type&apos;]
[u&apos;name&apos;, u&apos;colorscale&apos;, u&apos;y&apos;, u&apos;x&apos;, u&apos;z&apos;, u&apos;type&apos;]
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[103]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span class="c">## This section deals with the layout of the plot</span>

<span class="n">scene</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
    <span class="n">xaxis</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
        <span class="n">gridcolor</span><span class="o">=</span><span class="s">&#39;rgb(255, 255, 255)&#39;</span><span class="p">,</span>
        <span class="n">zerolinecolor</span><span class="o">=</span><span class="s">&#39;rgb(255, 255, 255)&#39;</span><span class="p">,</span>
        <span class="n">showbackground</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
        <span class="n">backgroundcolor</span><span class="o">=</span><span class="s">&#39;rgb(230, 230,230)&#39;</span>
    <span class="p">),</span>
    <span class="n">yaxis</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
        <span class="n">gridcolor</span><span class="o">=</span><span class="s">&#39;rgb(255, 255, 255)&#39;</span><span class="p">,</span>
        <span class="n">zerolinecolor</span><span class="o">=</span><span class="s">&#39;rgb(255, 255, 255)&#39;</span><span class="p">,</span>
        <span class="n">showbackground</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
        <span class="n">backgroundcolor</span><span class="o">=</span><span class="s">&#39;rgb(230, 230,230)&#39;</span>
    <span class="p">),</span>
    <span class="n">zaxis</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
        <span class="n">gridcolor</span><span class="o">=</span><span class="s">&#39;rgb(255, 255, 255)&#39;</span><span class="p">,</span>
        <span class="n">zerolinecolor</span><span class="o">=</span><span class="s">&#39;rgb(255, 255, 255)&#39;</span><span class="p">,</span>
        <span class="n">showbackground</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
        <span class="n">backgroundcolor</span><span class="o">=</span><span class="s">&#39;rgb(230, 230,230)&#39;</span>
    <span class="p">),</span>
    <span class="n">cameraposition</span> <span class="o">=</span> <span class="p">[[</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="mf">3.5</span><span class="p">]</span>
<span class="p">)</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">tools</span><span class="o">.</span><span class="n">make_subplots</span><span class="p">(</span><span class="n">rows</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">cols</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
                          <span class="n">specs</span><span class="o">=</span><span class="p">[[{</span><span class="s">&#39;is_3d&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">},</span> <span class="p">{</span><span class="s">&#39;is_3d&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">}]])</span>

<span class="c"># adding surfaces to subplots.</span>
<span class="n">data_original</span><span class="p">[</span><span class="s">&#39;scene&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;scene1&#39;</span>
<span class="n">data_original</span><span class="p">[</span><span class="s">&#39;colorbar&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">x</span><span class="o">=-</span><span class="mf">0.07</span><span class="p">)</span>

<span class="n">data</span><span class="p">[</span><span class="s">&#39;scene&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;scene2&#39;</span>
<span class="n">fig</span><span class="o">.</span><span class="n">append_trace</span><span class="p">(</span><span class="n">data_original</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">append_trace</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>


<span class="n">fig</span><span class="p">[</span><span class="s">&#39;layout&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s">&#39;Ring Cyclide&#39;</span><span class="p">,</span>
                     <span class="n">height</span><span class="o">=</span><span class="mi">800</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">9000</span><span class="p">)</span>
<span class="n">fig</span><span class="p">[</span><span class="s">&#39;layout&#39;</span><span class="p">][</span><span class="s">&#39;scene1&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">scene</span><span class="p">)</span>
<span class="n">fig</span><span class="p">[</span><span class="s">&#39;layout&#39;</span><span class="p">][</span><span class="s">&#39;scene2&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">scene</span><span class="p">)</span>
<span class="n">fig</span><span class="p">[</span><span class="s">&#39;layout&#39;</span><span class="p">][</span><span class="s">&#39;annotations&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
        <span class="nb">dict</span><span class="p">(</span>
            <span class="n">x</span><span class="o">=</span><span class="mf">0.1859205</span><span class="p">,</span>
            <span class="n">y</span><span class="o">=</span><span class="mf">0.95</span><span class="p">,</span>       <span class="c">#0.9395833,</span>
            <span class="n">xref</span><span class="o">=</span><span class="s">&#39;x&#39;</span><span class="p">,</span>
            <span class="n">yref</span><span class="o">=</span><span class="s">&#39;y&#39;</span><span class="p">,</span>
            <span class="n">text</span><span class="o">=</span><span class="s">&#39;4th Dim Prop. to z&#39;</span><span class="p">,</span>
            <span class="n">showarrow</span><span class="o">=</span><span class="bp">False</span>
        <span class="p">),</span>
            <span class="nb">dict</span><span class="p">(</span>
            <span class="n">x</span><span class="o">=</span><span class="mf">0.858</span><span class="p">,</span>
            <span class="n">y</span><span class="o">=</span><span class="mf">0.95</span><span class="p">,</span>
            <span class="n">xref</span><span class="o">=</span><span class="s">&#39;x&#39;</span><span class="p">,</span>
            <span class="n">yref</span><span class="o">=</span><span class="s">&#39;y&#39;</span><span class="p">,</span>
            <span class="n">text</span><span class="o">=</span><span class="s">&#39;4th Dim Prop. to Distance from Origin&#39;</span><span class="p">,</span>
            <span class="n">showarrow</span><span class="o">=</span><span class="bp">False</span>
        <span class="p">)</span>

    <span class="p">]</span>


<span class="n">plot_url</span> <span class="o">=</span> <span class="n">py</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s">&#39;multiple_surface_plots&#39;</span><span class="p">,</span> <span class="n">auto_open</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>This is the format of your plot grid:
[ (1,1) scene1 ]  [ (1,2) scene2 ]

</pre>

</div>
</div>

</div>
</div>
<center>
<iframe width="1000" height="800" frameborder="0" scrolling="no" src="https://plot.ly/~kevintest/333.embed"></iframe>
</center>
</div>{% endraw %}