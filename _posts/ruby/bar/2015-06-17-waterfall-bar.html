---
name: Waterfall Bar Chart
plot_url: https://plot.ly/~neda/2991/annual-profit-2015/
language: ruby
suite: bar
order: 16
sitemap: false
---

# Learn about API authentication here: https://plot.ly/ruby/getting-started
# Find your api_key here: https://plot.ly/settings/api
trace1 = {
  x: ["Product</br>Revenue", "Services</br>Revenue", "Total</br>Revenue", "Fixed</br>Costs", "Variable</br>Costs", "Total</br>Costs", "Total"], 
  y: [0, 430, 0, 570, 370, 370, 0], 
  name: "trace0", 
  marker: {color: "rgba(1,1,1, 0.0)"}, 
  type: "bar"
}
trace2 = {
  x: ["Product</br>Revenue", "Services</br>Revenue", "Total</br>Revenue", "Fixed</br>Costs", "Variable</br>Costs", "Total</br>Costs", "Total"], 
  y: [430, 260, 690, 0, 0, 0, 0], 
  name: "trace1", 
  marker: {
    color: "rgba(55, 128, 191, 0.7)", 
    line: {
      color: "rgba(55, 128, 191, 1.0)", 
      width: 2
    }
  }, 
  type: "bar"
}
trace3 = {
  x: ["Product</br>Revenue", "Services</br>Revenue", "Total</br>Revenue", "Fixed</br>Costs", "Variable</br>Costs", "Total</br>Costs", "Total"], 
  y: [0, 0, 0, 120, 200, 320, 0], 
  name: "trace2", 
  marker: {
    color: "rgba(219, 64, 82, 0.7)", 
    line: {
      color: "rgba(219, 64, 82, 1.0)", 
      width: 2
    }
  }, 
  type: "bar"
}
trace4 = {
  x: ["Product</br>Revenue", "Services</br>Revenue", "Total</br>Revenue", "Fixed</br>Costs", "Variable</br>Costs", "Total</br>Costs", "Total"], 
  y: [0, 0, 0, 0, 0, 0, 370], 
  name: "trace3", 
  marker: {
    color: "rgba(50, 171, 96, 0.7)", 
    line: {
      color: "rgba(50, 171, 96, 1.0)", 
      width: 2
    }
  }, 
  type: "bar"
}
data = [trace1, trace2, trace3, trace4]
layout = {
  title: "Annual Profit- 2015", 
  showlegend: false, 
  width: 600, 
  height: 600, 
  annotations: [
    {
      x: "Product</br>Revenue", 
      y: 400, 
      text: "$430K", 
      showarrow: false, 
      font: {
        family: "Arial", 
        size: 14, 
        color: "rgba(245, 246, 249, 1)"
      }
    }, 
    {
      x: "Services</br>Revenue", 
      y: 660, 
      text: "$260K", 
      showarrow: false, 
      font: {
        family: "Arial", 
        size: 14, 
        color: "rgba(245, 246, 249, 1)"
      }
    }, 
    {
      x: "Total</br>Revenue", 
      y: 660, 
      text: "$690K", 
      showarrow: false, 
      font: {
        family: "Arial", 
        size: 14, 
        color: "rgba(245, 246, 249, 1)"
      }
    }, 
    {
      x: "Fixed</br>Costs", 
      y: 590, 
      text: "$-120K", 
      showarrow: false, 
      font: {
        family: "Arial", 
        size: 14, 
        color: "rgba(245, 246, 249, 1)"
      }
    }, 
    {
      x: "Variable</br>Costs", 
      y: 400, 
      text: "$-200K", 
      showarrow: false, 
      font: {
        family: "Arial", 
        size: 14, 
        color: "rgba(245, 246, 249, 1)"
      }
    }, 
    {
      x: "Total</br>Costs", 
      y: 400, 
      text: "$-320K", 
      showarrow: false, 
      font: {
        family: "Arial", 
        size: 14, 
        color: "rgba(245, 246, 249, 1)"
      }
    }, 
    {
      x: "Total", 
      y: 340, 
      text: "$370K", 
      showarrow: false, 
      font: {
        family: "Arial", 
        size: 14, 
        color: "rgba(245, 246, 249, 1)"
      }
    }
  ], 
  paper_bgcolor: "rgba(245, 246, 249, 1)", 
  plot_bgcolor: "rgba(245, 246, 249, 1)", 
  barmode: "stack"
}

args = {   
    filename: '2015-06-17-waterfall-bar',
    fileopt: 'overwrite',
    layout: layout,
    world_readable: true
}


plotly.plot(data, args) do |response|
   puts response['url']
end
