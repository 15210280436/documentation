---
name: Choropleth Inset Map
plot_url: https://plot.ly/~jackp/8666/
language: ruby
suite: choropleth-maps
order: 3
sitemap: false
---

# Learn about API authentication here: https://plot.ly/ruby/getting-started
# Find your api_key here: https://plot.ly/settings/api
trace1 = {
  textposition: "bottom center", 
  name: "Sept", 
  tick0: 0, 
  text: ["1022 Guinea", "3362 Liberia", "3 Senegal", "1940 Sierra Leone"], 
  zmin: 0, 
  lon: [-9.7, -9.43, -14.45, -11.78], 
  dtick: 1000, 
  colorbar: {
    tickprefix: "", 
    autotick: false, 
    title: ""
  }, 
  lat: [9.95, 6.43, 14.5, 8.46], 
  sizemode: "diameter", 
  mode: "markers+text", 
  marker: {
    color: "rgb(33,113,181)", 
    line: {width: 0}, 
    size: [20.44, 67.24, 0.06, 38.8]
  }, 
  type: "scattergeo"
}
trace2 = {
  name: "Aug", 
  tick0: 0, 
  text: [771.0, 1395.0, 1.0, 1216.0], 
  zmin: 0, 
  lon: [-9.7, -9.43, -14.45, -11.78], 
  dtick: 1000, 
  colorbar: {
    tickprefix: "", 
    autotick: false, 
    title: ""
  }, 
  lat: [9.95, 6.43, 14.5, 8.46], 
  sizemode: "diameter", 
  marker: {
    color: "rgb(107,174,214)", 
    line: {width: 0}, 
    size: [15.42, 27.9, 0.02, 24.32]
  }, 
  type: "scattergeo"
}
trace3 = {
  name: "July", 
  tick0: 0, 
  text: [460.0, 329.0, 533.0], 
  zmin: 0, 
  lon: [-9.7, -9.43, -11.78], 
  dtick: 1000, 
  colorbar: {
    tickprefix: "", 
    autotick: false, 
    title: ""
  }, 
  lat: [9.95, 6.43, 8.46], 
  sizemode: "diameter", 
  marker: {
    color: "rgb(189,215,231)", 
    line: {width: 0}, 
    size: [9.2, 6.58, 10.66]
  }, 
  type: "scattergeo"
}
trace4 = {
  name: "June", 
  tick0: 0, 
  text: [413.0, 107.0, 239.0], 
  zmin: 0, 
  lon: [-9.7, -9.43, -11.78], 
  dtick: 1000, 
  colorbar: {
    tickprefix: "", 
    autotick: false, 
    title: ""
  }, 
  lat: [9.95, 6.43, 8.46], 
  sizemode: "diameter", 
  marker: {
    color: "rgb(239,243,255)", 
    line: {width: 0}, 
    size: [8.26, 2.14, 4.78]
  }, 
  type: "scattergeo"
}
trace5 = {
  autocolorscale: false, 
  colorscale: [
    [0, "rgb(0, 0, 0)"], [1, "rgb(0, 0, 0)], 
  type: "choropleth", 
  locations: ["Guinea", "Liberia", "Senegal", "Sierra Leone"], 
  showscale: false, 
  text: ["Guinea", "Liberia", "Senegal", "Sierra Leone"], 
  locationmode: "country names", 
  z: [1022.0, 3362.0, 3.0, 1940.0], 
  geo: "geo2"
}
trace6 = {
  showlegend: false, 
  text: ["Africa"], 
  lon: [21.0936], 
  geo: "geo2", 
  mode: "text", 
  lat: [7.1881], 
  type: "scattergeo"
}
data = [trace1, trace2, trace3, trace4, trace5, trace6]
layout = {
  geo2: {
    showland: true, 
    domain: {
      y: [0, 0.6], 
      x: [0, 0.6]
    }, 
    bgcolor: "rgba(255, 255, 255, 0.0)", 
    showframe: false, 
    landcolor: "rgb(229, 229, 229)", 
    showcountries: false, 
    scope: "africa"
  }, 
  geo: {
    showland: true, 
    domain: {
      y: [0, 1], 
      x: [0, 1]
    }, 
    countrycolor: "rgb(255, 255, 255)", 
    projection: {type: "Mercator"}, 
    showframe: false, 
    lataxis: {range: [0.0, 12.0]}, 
    landcolor: "rgb(229, 229, 229)", 
    lonaxis: {range: [-15.0, -5.0]}, 
    showcoastlines: true, 
    coastlinecolor: "rgb(255, 255, 255)", 
    scope: "africa", 
    resolution: 50
  }, 
  legend: {traceorder: "reversed"}, 
  title: "Ebola cases reported by month in West Africa 2014<br> Source: <a href=\"https://data.hdx.rwlabs.org/dataset/rowca-ebola-cases\">HDX</a>"
}

args = {   
    filename: '2015-07-03-choropleth-inset',
    fileopt: 'overwrite',
    layout: layout,
    world_readable: true
}


plotly.plot(data, args) do |response|
   puts response['url']
end
